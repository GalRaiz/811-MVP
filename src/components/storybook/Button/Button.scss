@use "../../../styles/variables" as *;
@use "sass:color";
@use "sass:map";

// ========================================
// Maps
// ========================================
$button-types: (
  primary: (
    bg: $button-primary-bg,
    color: $text-inverse,
    hover: color.adjust($button-primary-bg, $lightness: -5%),
    border: $border-color,
    cursor: pointer,
  ),
  secondary: (
    bg: $secondary-color, // נעים יותר לעין
    color: $text-primary,
    hover: color.adjust($secondary-color, $lightness: -5%),
    border: $border-color,
    cursor: pointer,
  ),
  tertiary: (
    bg: $button-tertiary-bg,
    color: $text-inverse,
    hover: color.adjust($button-tertiary-bg, $lightness: -5%),
    border: $border-color,
    cursor: pointer,
  ),
  transparent-on-dark: (
    bg: transparent,
    color: $text-inverse,
    hover: $text-muted,
    border: transparent,
    cursor: pointer,
  ),
  transparent-on-light: (
    bg: transparent,
    color: $text-color,
    hover: $text-muted,
    border: transparent,
    cursor: pointer,
  ),
  icon-only: (
    bg: #f3f4f6,
    color: #6b7280,
    hover: #e5e7eb,
    border: transparent,
    cursor: pointer,
  ),
  close: (
    bg: #f3f4f6,
    color: #6b7280,
    hover: #e5e7eb,
    border: transparent,
    cursor: pointer,
  ),
);

$button-sizes: (
  small: (
    padding: $padding-xs $padding-small,
    font-size: 12px,
  ),
  medium: (
    padding: $padding-normal $padding-medium,
    font-size: 14px,
  ),
  large: (
    padding: $padding-medium $padding-large,
    font-size: 16px,
  ),
);

// ========================================
// Mixins
// ========================================
@mixin button-type($props) {
  background-color: map.get($props, bg);
  color: map.get($props, color);
  border: 1px solid map.get($props, border);
  cursor: map.get($props, cursor);
  box-shadow: $box-shadow;

  &:hover:not(:disabled):not(.btn--disabled) {
    background-color: map.get($props, hover);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15); // קצת עמוק יותר ב-hover
  }

  &:disabled,
  &.btn--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
    box-shadow: none;
  }
}

@mixin button-size($props) {
  padding: map.get($props, padding);
  font-size: map.get($props, font-size);
}

// ========================================
// Base Button
// ========================================
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: $border-radius;
  font-weight: 500;
  gap: $padding-small;
  transition: all 0.2s ease;

  // Types
  @each $type, $props in $button-types {
    &--#{$type} {
      @include button-type($props);
    }
  }

  // Sizes
  @each $size, $props in $button-sizes {
    &--#{$size} {
      @include button-size($props);
    }
  }

  // Full width
  &--fullWidth {
    width: 100%;
  }

  // Icon
  &__icon {
    display: inline-flex;
    align-items: center;
  }

  // Reverse icon order (icon right)
  &--icon-right {
    flex-direction: row-reverse;
  }

  // Icon-only button specific styles
  &--icon-only {
    width: 24px;
    height: 24px;
    padding: 0;
    border-radius: 50%;
    min-width: 24px;
    min-height: 24px;
  }

  // Close button specific styles
  &--close {
    width: 32px;
    height: 32px;
    padding: 0;
    border-radius: 6px;
    min-width: 32px;
    min-height: 32px;
  }
}
